<!DOCTYPE html >
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <!-- CSS -->
    <link rel="stylesheet" href="../../static/component/bootstrap/css/bootstrap.min.css" >
    <link rel="stylesheet"href="../../static/home/css/main.css">
    <link rel="stylesheet" href="../../static/home/css/iconfont.css">
    <link rel="stylesheet" href="../../static/component/layui/css/layui.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <style>
        .layui-card{
            border-radius: 7px;
        }

    </style>
</head>
<body>
<header >
<nav class="navbar fixed-top navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
        <a class="navbar-brand" href="/">
            <strong>钗头凤</strong>
        </a>
        <button class="navbar-toggler collapsed" type="button"
                data-toggle="collapse" data-target="#navbarsExample07"
                aria-controls="navbarsExample07" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="navbar-collapse collapse" id="navbarsExample07" >
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="#">推荐</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">诗文</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link">名句</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link">作者</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link">朝代</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link">关于</a>
                </li>
            </ul>
            <form class="form-inline my-2 my-md-0">
                <input class="form-control form-control-sm" type="text" placeholder="弱水三千，只取一瓢" aria-label="Search">
            </form>
            <ul class="navbar-nav" style="margin-left: 10px">
                <li class="nav-item">
                    <a class="nav-link" href="#">登 录</a>
                </li>
                <!--<li class="nav-item">-->
                <!--    <a class="nav-link" href="#"></a>-->
                <!--</li>-->
            </ul>
        </div>
    </div>
</nav>
</header>



<!--轮播图-->
<div  id="carouselExampleCaptions" class="carousel slide carousel-fade" data-ride="carousel"  >
    <ol class="carousel-indicators">
        <li data-target="#carouselExampleCaptions" data-slide-to="0" class="active" ></li>
        <li data-target="#carouselExampleCaptions" data-slide-to="1"></li>
        <li data-target="#carouselExampleCaptions" data-slide-to="2"></li>
    </ol>
    <div class="carousel-inner" >
        <div class="carousel-item active" >
            <img src="../../static/home/img/02.png" class="d-block w-100" alt="...">
            <div class="carousel-caption d-none d-md-block">
                <h4 style="padding-bottom: 100px"><span id="pic_1">念 念 不 忘，必 有 回 响</span></h4>
            </div>
        </div>
        <div class="carousel-item">
            <img src="../../static/home/img/10.png" class="d-block w-100" alt="...">
            <div class="carousel-caption d-none d-md-block">
                <h5>Second slide label</h5>
                <p>Some representative placeholder content for the second slide.</p>
            </div>
        </div>
        <div class="carousel-item">
            <img src="../../static/home/img/11.png" class="d-block w-100" alt="...">
            <div class="carousel-caption d-none d-md-block">
                <h5>Third slide label</h5>
                <p>Some representative placeholder content for the third slide.</p>
            </div>
        </div>
    </div>
    <button class="carousel-control-prev" type="button" data-target="#carouselExampleCaptions" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-target="#carouselExampleCaptions" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </button>
</div>


<div class="container-fluid poetry_main no-padding">
    <div class="row col-lg-12">
        <div class="left_card col-lg-7" >
            <div class="poem-card">
                <div id="poem-c-4789">
                    <div class="card-title">
                        <h2 class="poem-title">
                            <a class="title-link" href="https://xuegushi.cn/poem/48789" target="_blank">西江月·重九</a>
                        </h2>
                    </div>
                    <div class="poem-author">
                        <p><a class="author_dynasty" href="https://xuegushi.cn/poem?dynasty=宋代" target="_blank">
                            宋代</a> : <a class="author_name" target="_blank">苏轼</a>
                        </p>
                    </div>
                    <div class="poem-content">
                        <p class="p-content">点点楼头细雨，重重江外平湖。当年戏马会东徐，今日凄凉南浦。</p>
                        <p class="p-content">莫恨黄花未吐，且教红粉相扶。酒阑不必看茱萸，俯仰人间今古。</p>
                    </div>
                </div>
                <div class="poem-tool">
                    <div class="layui-inline" >
                        <i class="iconfont icon-shoucang" ></i>
                    </div>
                    <div class="layui-inline" >
                        <i class="iconfont icon-xihuan" ></i>
                    </div>
                    <div class="layui-inline">
                        <i class="iconfont icon-fuzhi" aria-hidden="true"></i>
                    </div>
                    <div class="layui-inline dianZhan">
                        <i class="iconfont icon-dianzan"></i>
                        <span >68</span>
                    </div>
                </div>

                <div class="poem-tag">
                    <a href="https://xuegushi.cn/poem?tag=感伤" class="tag">感伤 ,</a>
                    <a href="" class="tag">时光</a>                                                                                                            </p>
                </div>
            </div>
            <div class="poem-card">
                <div id="poem-c-489">
                    <div class="card-title">
                        <h2 class="poem-title">
                            <a class="title-link" href="https://xuegushi.cn/poem/48789" target="_blank">西江月·重九</a>
                        </h2>
                    </div>
                    <div class="poem-author">
                        <p><a class="author_dynasty" href="https://xuegushi.cn/poem?dynasty=宋代" target="_blank">
                            宋代</a> : <a class="author_name" target="_blank">苏轼</a>
                        </p>
                    </div>
                    <div class="poem-content">
                        <p class="p-content">点点楼头细雨，重重江外平湖。当年戏马会东徐，今日凄凉南浦。</p>
                        <p class="p-content">莫恨黄花未吐，且教红粉相扶。酒阑不必看茱萸，俯仰人间今古。</p>
                    </div>
                </div>
                <div class="poem-tool">
                    <div class="layui-inline" >
                        <i class="iconfont icon-shoucang" ></i>
                    </div>
                    <div class="layui-inline" >
                        <i class="iconfont icon-xihuan" ></i>
                    </div>
                    <div class="layui-inline">
                        <i class="iconfont icon-fuzhi" aria-hidden="true"></i>
                    </div>
                    <div class="layui-inline dianZhan">
                        <i class="iconfont icon-dianzan"></i>
                        <span >68</span>
                    </div>
                </div>

                <div class="poem-tag">
                    <a href="https://xuegushi.cn/poem?tag=感伤" class="tag">感伤 ,</a>
                    <a href="" class="tag">时光</a>                                                                                                            </p>
                </div>
            </div>

            <!--分页-->
            <div id="page_bottom" class="layui-table-page" style=""></div>
        </div>
        <div class="right_card col-lg-3" >
            <div class="layui-card">
                <div class="layui-card-header">动态</div>
                <div class="layui-card-body layui-row layui-col-space10">
                    <ul class="list">
                        <li class="list-item"><span class="title">优化代码格式</span><span
                                class="footer">2020-06-04 11:28</span></li>
                        <li class="list-item"><span class="title">新增消息组件</span><span
                                class="footer">2020-06-01 04:23</span></li>
                        <li class="list-item"><span class="title">移动端兼容</span><span
                                class="footer">2020-05-22 21:38</span></li>
                        <li class="list-item"><span class="title">系统布局优化</span><span
                                class="footer">2020-05-15 14:26</span></li>
                        <li class="list-item"><span class="title">兼容多系统菜单模式</span><span
                                class="footer">2020-05-13 16:32</span></li>
                        <li class="list-item"><span class="title">兼容多标签页切换</span><span
                                class="footer">2019-12-9 14:58</span></li>
                        <li class="list-item"><span class="title">扩展下拉组件</span><span
                                class="footer">2019-12-7 9:06</span></li>
                        <li class="list-item"><span class="title">扩展卡片样式</span><span
                                class="footer">2019-12-1 10:26</span></li>
                    </ul>
                </div>
            </div>

            <div class="layui-card">
                <div class="layui-card-header">动态</div>
                <div class="layui-card-body layui-row layui-col-space10">
                    <ul class="list">
                        [[${poemNum}]]
                        <li class="list-item"><span class="title">优化代码格式</span><span
                                class="footer">2020-06-04 11:28</span></li>
                        <li class="list-item"><span class="title">新增消息组件</span><span
                                class="footer">2020-06-01 04:23</span></li>
                        <li class="list-item"><span class="title">移动端兼容</span><span
                                class="footer">2020-05-22 21:38</span></li>
                        <li class="list-item"><span class="title">系统布局优化</span><span
                                class="footer">2020-05-15 14:26</span></li>
                        <li class="list-item"><span class="title">兼容多系统菜单模式</span><span
                                class="footer">2020-05-13 16:32</span></li>
                        <li class="list-item"><span class="title">兼容多标签页切换</span><span
                                class="footer">2019-12-9 14:58</span></li>
                        <li class="list-item"><span class="title">扩展下拉组件</span><span
                                class="footer">2019-12-7 9:06</span></li>
                        <li class="list-item"><span class="title">扩展卡片样式</span><span
                                class="footer">2019-12-1 10:26</span></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11"></script>
<script>
    var typed = new Typed("#pic_1", {
        strings: ['念念不忘,必有回响'],
        startDelay: 300,
        typeSpeed: 100,
        loop: false,
        backSpeed: 50,
        backDelay: 700,
        showCursor: true
    });
</script>
<!-- jQuery and JavaScript Bundle with Popper -->
<script src="../../static/admin/js/jquery.min.js" ></script>
<script src="../../static/component/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="../../static/component/layui/layui.js"></script>
<script src="../../static/component/pear/pear.js"></script>
<script>
    layui.use(['laypage', 'jquery','popup'], function(){
        let laypage = layui.laypage;
        let $ = layui.jquery;
        let popup = layui.popup;

        //完整功能
        laypage.render({
            elem: 'page_bottom'
            ,count: [[${poemNum}]]
            ,limit: 8
            ,limits: [8, 16, 24]
            ,groups: 1
            ,curr: location.hash.replace('#!pages=', '') //获取起始页
            ,hash: 'pages' //自定义hash值
            ,layout: ['prev', 'page', 'next', 'skip','count', 'limit']
            ,prev: '<i class="layui-icon"></i>'
            ,next: '<i class="layui-icon"></i>'
            ,jump: function(obj){
                let page={};
                page.page = obj.curr;
                page.limit = obj.limit;

                $.ajax({
                    url: '/home/data',
                    data: page,
                    dataType: 'json',
                    contentType: 'application/json',
                    type: 'get',
                    success: function (result) {
                        if (result.code !== 0){
                            popup.failure(result.msg);
                            return
                        }
                        this.count = result.count;
                        let left_card = $('.left_card')
                        let data = result.data;

                        let poem_card = $('.poem-card')
                        for (let i = 0; i < poem_card.length; i++) {
                            poem_card[i].remove()
                        }

                        for (let i = 0; i < data.length; i++) {
                            let poem_card = '<div class="poem-card">'+
                                '<div id='+data[i].poemId +'>'+
                                '<div class="card-title">\n' +
                                '                        <h2 class="poem-title">'+
                                '<a class="title-link" href="" target="_blank">'+data[i].title+'</a>'+
                                '    </h2>\n' +
                                '                    </div>\n' +
                                '                    <div class="poem-author">'+
                                '<p><a class="author_dynasty" href="" target="_blank">'+data[i].dynasty+
                                '</a> : <a class="author_name" target="_blank">'+data[i].author+'</a>'+
                                '   </p>\n' +
                                '                    </div>\n' +
                                '                    <div class="poem-content">'

                            let contents = data[i].content.split('。');

                            let poem_content = '';
                            for (let j = 0; j < contents.length; j++) {
                                if (contents[j].length !== 0){
                                    poem_content += '<p class="p-content">'+contents[j]+'。</p>'
                                }
                            }

                            poem_card += poem_content +
                                '                    </div>\n' +
                                '                </div>\n' +
                                '                <div class="poem-tool">\n' +
                                '                    <div class="layui-inline" >\n' +
                                '                        <i class="iconfont icon-shoucang" ></i>\n' +
                                '                    </div>\n' +
                                '                    <div class="layui-inline" >\n' +
                                '                        <i class="iconfont icon-xihuan" ></i>\n' +
                                '                    </div>\n' +
                                '                    <div class="layui-inline">\n' +
                                '                        <i class="iconfont icon-fuzhi" aria-hidden="true"></i>\n' +
                                '                    </div>\n' +
                                '                    <div class="layui-inline dianZhan">\n' +
                                '                        <i class="iconfont icon-dianzan"></i>\n' +
                                '                        <span >68</span>\n' +
                                '                    </div>\n' +
                                '                </div>\n' +
                                '\n' +
                                '                <div class="poem-tag">'

                            let poem_tag = '';
                            let tags = data[i].tags.replace(/#/g,"  #  ")
                            // for (let j = 0; j < tags.length; j++) {
                            //     poem_tag += '<a href="" class="tag">'+tags[j]+' # </a>'
                            // }
                            poem_card += tags+'    </div>\n' +
                                '            </div>'

                            left_card.prepend(poem_card);
                        }
                    }
                })
            }
        });
    })
</script>
</body>
</html>