<!DOCTYPE html >
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <!-- CSS -->
    <link rel="stylesheet" href="../../static/component/bootstrap/css/bootstrap.min.css" >
    <link rel="stylesheet"href="../../static/home/css/main.css">
    <link rel="stylesheet" href="../../static/home/css/iconfont.css">
    <link rel="stylesheet" href="../../static/component/layui/css/layui.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <style>
        .layui-card{
            border-radius: 7px;
        }
    </style>
</head>
<body>
<header >
    <nav class="navbar fixed-top navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="/">
                <strong>钗头凤</strong>
            </a>
            <button class="navbar-toggler collapsed" type="button"
                    data-toggle="collapse" data-target="#navbarsExample07"
                    aria-controls="navbarsExample07" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="navbar-collapse collapse" id="navbarsExample07" >
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item active">
                        <a class="nav-link" href="/recommend.html">推荐</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/poem.html">诗文</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/sentence.html">名句</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/author.html">作者</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/dynasty.html">朝代</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/about.html">关于</a>
                    </li>
                </ul>
                <form class="form-inline my-2 my-md-0">
                    <input class="form-control form-control-sm" type="text" placeholder="弱水三千，只取一瓢" aria-label="Search">
                </form>
                <ul class="navbar-nav" style="margin-left: 10px">
                    <li class="nav-item">
                        <a class="nav-link" href="/login">登 录</a>
                    </li>
                    <!--<li class="nav-item">-->
                    <!--    <a class="nav-link" href="#"></a>-->
                    <!--</li>-->
                </ul>
            </div>
        </div>
    </nav>
</header>


<!--轮播图-->
<div  id="carouselExampleCaptions" class="carousel slide carousel-fade" data-ride="carousel"  >
    <ol class="carousel-indicators">
        <li data-target="#carouselExampleCaptions" data-slide-to="0" class="active" ></li>
        <li data-target="#carouselExampleCaptions" data-slide-to="1"></li>
        <li data-target="#carouselExampleCaptions" data-slide-to="2"></li>
    </ol>
    <div class="carousel-inner" >
        <div class="carousel-item active" >
            <img src="../../static/home/img/02.png" class="d-block w-100" alt="...">
            <div class="carousel-caption d-none d-md-block">
                <h4 ><span id="subtitle" >念 念 不 忘，必 有 回 响</span></h4>
            </div>
        </div>
        <div class="carousel-item">
            <img src="../../static/home/img/10.png" class="d-block w-100" alt="...">
            <div class="carousel-caption d-none d-md-block">
                <h5>Second slide label</h5>
                <p>Some representative placeholder content for the second slide.</p>
            </div>
        </div>
        <div class="carousel-item">
            <img src="../../static/home/img/11.png" class="d-block w-100" alt="...">
            <div class="carousel-caption d-none d-md-block">
                <h5>Third slide label</h5>
                <p>Some representative placeholder content for the third slide.</p>
            </div>
        </div>
    </div>
    <button class="carousel-control-prev" type="button" data-target="#carouselExampleCaptions" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-target="#carouselExampleCaptions" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </button>
</div>


<div class="container-fluid poetry_main no-padding">
    <div class="row col-lg-12">
        <div class="col-lg-9 poem-detail" >
            <div class="poem-detail-part">
                <div class="poem-detail-title">
                    九日有感
                </div>
                <div class="poem-detail-author-dyansty">
                    <span class="poem-detail-dynasty">宋代</span>
                    <span class="poem-detail-author">赵蕃</span>
                </div>
                <div class="poem-detail-body">
                    寥落渊明后，凄凉九日期。

                    寻花漫青蕊，对酒只空卮。

                    林密栖鸦早，江寒泊雁迟。

                    楼高无那倚，弦绝有谁知。
                </div>
            </div>


            <div class="poem-detail-reviews" >
                <div class="review-item">
                    <div class="review-detail">
                        <span class="review-author">评论人</span>
                        <span class="review-time" >
                            <span>评论时间:</span>
                            2022-4-12
                        </span>
                        <span class="review-dianZan">
                            <i class="iconfont icon-dianzan"></i>
                            <span>2022</span>
                        </span>
                    </div>
                    <div class="review-desc">
                        描述：楼高无那倚，弦绝有谁知。
                    </div>
                </div>
                <div class="review-item">
                    <div class="review-detail">
                        <span class="review-author">评论人</span>
                        <span class="review-time" >
                            <span>评论时间:</span>
                            2022-4-12
                        </span>
                        <span class="review-dianZan">
                            <i class="iconfont icon-dianzan"></i>
                            <span>2022</span>
                        </span>
                    </div>
                    <div class="review-desc">
                        描述：楼高无那倚，弦绝有谁知。
                    </div>
                </div>
                <div class="review-item">
                    <div class="review-detail">
                        <span class="review-author">评论人</span>
                        <span class="review-time" >
                            <span>评论时间:</span>
                            2022-4-12
                        </span>
                        <span class="review-dianZan">
                            <i class="iconfont icon-dianzan"></i>
                            <span>2022</span>
                        </span>
                    </div>
                    <div class="review-desc">
                        描述：楼高无那倚，弦绝有谁知。
                    </div>
                </div>
                <div class="review-item">
                    <div class="review-detail">
                        <span class="review-author">评论人</span>
                        <span class="review-time" >
                            <span>评论时间:</span>
                            2022-4-12
                        </span>
                        <span class="review-dianZan">
                            <i class="iconfont icon-dianzan"></i>
                            <span>2022</span>
                        </span>
                    </div>
                    <div class="review-desc">
                        描述：楼高无那倚，弦绝有谁知。
                    </div>
                </div>
            </div>

            <!--分页-->
            <div id="page_bottom" class="layui-table-page" style="margin-top: 12px;"></div>

            <div class="add-review">dweaf</div>

        </div>
    </div>
</div>



<!-- jQuery and JavaScript Bundle with Popper -->
<script src="../../static/admin/js/jquery.min.js" ></script>
<script src="../../static/component/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="../../static/component/layui/layui.js"></script>
<script src="../../static/component/pear/pear.js"></script>
<script>
    layui.use(['laypage', 'jquery','popup'], function(){
        let laypage = layui.laypage;
        let $ = layui.jquery;
        let popup = layui.popup;


        $('.sentenceItem').click(function () {
            $('.sentenceItem').removeClass('selected');
            $('.sentenceItem .sentenceTool').addClass('layui-hide');
            $(this).children('.sentenceTool').removeClass('layui-hide');
            $(this).addClass('selected')
        })


        //完整功能
        laypage.render({
            elem: 'page_bottom'
            ,count: 2323
            ,limit: 8
            ,limits: [8, 16, 24]
            ,groups: 1
            ,curr: location.hash.replace('#!pages=', '') //获取起始页
            ,hash: 'pages' //自定义hash值
            ,layout: ['prev', 'page', 'next', 'skip','count', 'limit']
            ,prev: '<i class="layui-icon"></i>'
            ,next: '<i class="layui-icon"></i>'
            ,jump: function(obj){
                let page={};
                page.page = obj.curr;
                page.limit = obj.limit;

                $.ajax({
                    url: '/home/sentence',
                    data: page,
                    dataType: 'json',
                    contentType: 'application/json',
                    type: 'get',
                    success: function (result) {
                        if (result.code !== 0){
                            popup.failure(result.msg);
                            return
                        }
                        let data = result.data;

                        let sentence_content_list = $('.sentence-content-list')
                        let sentenceItem = $('.sentenceItem')

                        for (let i = 0; i < sentenceItem.length; i++) {
                            sentenceItem[i].remove()
                        }

                        for (let i = 0; i < data.length; i++) {

                            let item = '<div class="sentenceItem">\n' +
                                '    <div class="sentence">\n' +
                                '     <div>   <a class="sentence-left">'+data[i].sentence+
                                '</a></div>\n' +
                                '    <div class="sentence-title-author">    <a href="#" class="sentence-right">'+data[i].author+' 《'+data[i].title+'》'+
                                '    </a></div>\n' +
                                '    </div>\n' +
                                '    <div class="sentenceContent">'+'今夕何夕兮，搴舟中流。今日何日兮，得与王子同舟。\n' +
                                '        蒙羞被好兮，不訾诟耻。心几烦而不绝兮，得知王子。\n' +
                                '        山有木兮木有枝，心悦君兮君不知。'+
                                '</div>\n' +
                                '    <div class="sentenceTool layui-hide">\n' +
                                '        <div class="layui-inline sentence-shouChang">\n' +
                                '            <i class="iconfont icon-shoucang"></i>收藏\n' +
                                '        </div>\n' +
                                '        <div class="layui-inline tags">\n' +
                                '            <i class="iconfont icon-biaoqian"></i>宋词三百首 , 宋词精选 , 婉约 , 长江 , 思念 , 爱情\n' +
                                '        </div>\n' +
                                '        <div class="layui-inline dianZan">\n' +
                                '            <i class="iconfont icon-dianzan"></i>\n' +
                                '            122\n' +
                                '        </div>\n' +
                                '    </div>\n' +
                                '</div>'




                            // let tags = data[i].tags.replace(/#/g,"  #  ")

                            sentence_content_list.prepend(item);
                        }
                    }
                })
            }
        });


        $('body').on('click','.poem-tool div.layui-inline',function () {
            let poem = {};
            let id_value = $(this).attr('id');
            let cur = $(this).children('span');
            poem.poemId = $(this).parent().prev().attr('id');

            switch (id_value) {
                case 'shouCuang':
                    poem.shouCuang = parseInt(cur.text())+1;break;
                case 'xiHuan':
                    poem.xiHuan = parseInt(cur.text())+1;break;
                case 'dianZan':
                    poem.dianZan = parseInt(cur.text())+1;break;
                case 'copy':
                    console.log(id_value);break;
            }
            console.log(JSON.stringify(poem));
            $.ajax({
                url: '/home/poem/update',
                data: JSON.stringify(poem),
                dataType: 'json',
                contentType: 'application/json',
                type: 'put',
                success:function (result) {
                    if (result.success){
                        cur.text(parseInt(cur.text())+1);
                        layer.msg('成功');
                    }
                }
            })
            // let cur = $(this).children('span');
            // cur.text(parseInt(cur.text())+1)
        })
    })



</script>
</body>
</html>